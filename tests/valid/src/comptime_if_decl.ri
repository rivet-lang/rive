struct Struct {
    $if (_LINUX_) {
        linux_field: i32 = 5;
    } $else $if (_WINDOWS_) {
        windows_field: u32 = 10;
    }
}

$if (_x64_) {
    pub fn is_64bits() bool {
        return true;
    }
} $else {
    pub fn is_32bits() bool {
        return true;
    }
}

test "comptime `if` declaration" {
    var st = Struct{};
    $if (_LINUX_) {
        assert!(st.linux_field == 5);
    } $else $if (_WINDOWS_) {
        assert!(st.windows_field == 10);
    }
}

test "comptime `if` statement" {
    $if (_x64_) {
        assert!(is_64bits());
    } $else {
        assert!(is_32bits());
    }
}
